<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InfoFlash - URBANA VISION</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: system-ui, -apple-system, sans-serif; 
            background: linear-gradient(135deg, #134e4a 0%, #7c2d12 100%); 
            min-height: 100vh; 
            color: white; 
            padding: 20px;
        }
        .container { max-width: 800px; margin: 0 auto; }
        
        .header { 
            background: rgba(255, 255, 255, 0.1); 
            backdrop-filter: blur(10px);
            border-radius: 20px; 
            padding: 30px; 
            text-align: center; 
            margin-bottom: 30px; 
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .brand-name { 
            font-size: 28px; 
            font-weight: 800; 
            margin-bottom: 10px;
            background: linear-gradient(45deg, #10b981, #059669);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .news-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .news-item {
            background: rgba(16, 185, 129, 0.1);
            border-left: 4px solid #10b981;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            transition: all 0.3s ease;
            position: relative;
        }

        .news-item:hover {
            background: rgba(16, 185, 129, 0.15);
            transform: translateY(-2px);
        }

        .news-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            gap: 10px;
        }

        .btn-share-whatsapp {
            background: linear-gradient(45deg, #25d366, #128c7e);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        .btn-share-whatsapp:hover {
            transform: translateY(-1px);
            box-shadow: 0 3px 10px rgba(37, 211, 102, 0.3);
        }

        .btn-read-more {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
            border: 1px solid #10b981;
            padding: 8px 15px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .btn-read-more:hover {
            background: rgba(16, 185, 129, 0.3);
            transform: translateY(-1px);
        }

        .news-date {
            color: #10b981;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .news-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 10px;
            color: #fff;
        }

        .news-content {
            line-height: 1.6;
            opacity: 0.9;
            margin-bottom: 10px;
        }

        .news-source {
            font-size: 12px;
            opacity: 0.7;
            font-style: italic;
        }

        .urgent-news {
            background: rgba(239, 68, 68, 0.2);
            border-left-color: #ef4444;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.8; }
            100% { opacity: 1; }
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 15px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: linear-gradient(45deg, #10b981, #059669);
            color: white;
        }

        .btn-whatsapp {
            background: linear-gradient(45deg, #25d366, #128c7e);
            color: white;
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .promo-banner {
            background: linear-gradient(45deg, #f59e0b, #dc2626);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            margin: 25px 0;
            box-shadow: 0 5px 20px rgba(245, 158, 11, 0.3);
        }

        .promo-banner h3 {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .health-tip {
            background: rgba(34, 211, 238, 0.1);
            border: 2px solid rgba(34, 211, 238, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        .health-tip h4 {
            color: #22d3ee;
            margin-bottom: 10px;
        }

        .footer {
            position: fixed;
            bottom: 10px;
            right: 25px;
            font-size: 10px;
            font-weight: 600;
            opacity: 0.6;
            z-index: 999;
            background: linear-gradient(45deg, #8B4513, #DAA520);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .weather-widget {
            background: rgba(59, 130, 246, 0.1);
            border: 2px solid rgba(59, 130, 246, 0.3);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            margin: 20px 0;
        }

        .social-share {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 25px 0;
            flex-wrap: wrap;
        }

        .loading {
            text-align: center;
            padding: 40px;
            font-size: 18px;
            color: #10b981;
        }

        .error {
            background: rgba(239, 68, 68, 0.2);
            border: 2px solid #ef4444;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            color: #ef4444;
            margin: 20px 0;
        }

        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: linear-gradient(45deg, #6366f1, #4f46e5);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 12px;
            cursor: pointer;
            text-decoration: none;
            z-index: 1000;
        }

        .refresh-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(45deg, #10b981, #059669);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 12px;
            cursor: pointer;
            z-index: 1000;
        }

        .api-status {
            padding: 10px;
            border-radius: 10px;
            margin: 10px 0;
            text-align: center;
            font-size: 12px;
        }

        .api-working {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
        }

        .api-fallback {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
        }

        @media (max-width: 768px) {
            .social-share {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 300px;
            }
        }
    </style>
</head>
<body>
    <a href="./" class="back-btn">üè† Volver al Sistema</a>
    <button onclick="cargarNoticias()" class="refresh-btn">üîÑ Actualizar</button>

    <div class="container">
        <div class="header">
            <div style="font-size: 50px; margin-bottom: 15px;">üì∞</div>
            <h1 class="brand-name">URBANA VISION</h1>
            <h2>InfoFlash - Noticias en Tiempo Real</h2>
            <p style="margin-top: 10px;">üì± 809-713-5307 | üåê urbanavision.com</p>
            <div style="margin-top: 15px; font-size: 14px; opacity: 0.8;">
                <span id="currentDate"></span> | <span id="currentTime"></span>
            </div>
        </div>

        <div class="promo-banner">
            <h3>üéÅ ¬°PROMOCI√ìN ESPECIAL DEL MES!</h3>
            <p>30% de descuento en monturas seleccionadas + Examen visual GRATIS</p>
            <button class="btn btn-whatsapp" onclick="consultarPromocion()" style="margin-top: 15px;">
                üì± ¬°Quiero esta promoci√≥n!
            </button>
        </div>

        <div class="news-section">
            <h2>üåç Noticias Mundiales en Tiempo Real</h2>
            <div id="apiStatus" class="api-status" style="display: none;"></div>
            <div id="loadingNews" class="loading">
                <div>üì° Cargando noticias internacionales...</div>
                <div style="margin-top: 10px; font-size: 14px;">M√∫ltiples fuentes de noticias</div>
            </div>
            <div id="errorNews" class="error" style="display: none;">
                ‚ùå Conectando a fuentes alternativas de noticias...
            </div>
            <div id="newsContainer"></div>
        </div>

        <div class="health-tip">
            <h4>üí° Consejo de Salud Visual del D√≠a</h4>
            <p><strong>Protecci√≥n UV:</strong> Siempre use lentes con protecci√≥n UV al salir al sol, incluso en d√≠as nublados. Los rayos UV pueden causar cataratas y otros problemas oculares a largo plazo. ¬°Sus ojos se lo agradecer√°n!</p>
        </div>

        <div class="weather-widget">
            <h4>üå§Ô∏è Clima y Cuidado Visual</h4>
            <p><strong>Clima de Hoy:</strong> Soleado, 32¬∞C</p>
            <p>‚òÄÔ∏è <strong>Recomendaci√≥n:</strong> D√≠a perfecto para usar lentes de sol con protecci√≥n UV. El reflejo del sol en superficies puede ser intenso.</p>
        </div>

        <div class="news-section">
            <h2>üè• Noticias URBANA VISION</h2>
            
            <div class="news-item">
                <div class="news-date">üìÖ Hoy</div>
                <div class="news-title">Nuevo Equipo de Examen Digital Disponible</div>
                <div class="news-content">
                    Hemos incorporado tecnolog√≠a de √∫ltima generaci√≥n para ex√°menes m√°s precisos y r√°pidos. Nuestro nuevo autorefract√≥metro digital proporciona mediciones exactas en segundos.
                </div>
            </div>

            <div class="news-item">
                <div class="news-date">üìÖ Esta Semana</div>
                <div class="news-title">Llegada de Nueva Colecci√≥n de Monturas</div>
                <div class="news-content">
                    Recibimos m√°s de 50 modelos nuevos de monturas de las mejores marcas internacionales. Desde dise√±os cl√°sicos hasta las √∫ltimas tendencias de moda.
                </div>
            </div>

            <div class="news-item">
                <div class="news-date">üìÖ Mes de Julio</div>
                <div class="news-title">Campa√±a de Ex√°menes Visuales Gratuitos</div>
                <div class="news-content">
                    Durante todo el mes de julio, ofrecemos ex√°menes visuales gratuitos para estudiantes y personas mayores de 60 a√±os. Una oportunidad √∫nica de cuidar su salud visual.
                </div>
            </div>
        </div>

        <div class="news-section">
            <h2>üì± S√≠guenos y Comparte</h2>
            <p style="text-align: center; margin-bottom: 20px;">Mantente informado sobre salud visual y nuestras promociones</p>
            
            <div class="social-share">
                <button class="btn btn-whatsapp" onclick="compartirNoticias()">
                    üì± Compartir por WhatsApp
                </button>
                <button class="btn btn-primary" onclick="suscribirseNoticias()">
                    üîî Recibir Noticias
                </button>
                <button class="btn btn-secondary" onclick="agendarCita()">
                    üìÖ Agendar Cita
                </button>
            </div>
        </div>
    </div>

    <div class="footer">
        by fbrugal jrubinstein consultores
    </div>

    <script>
        // Configuraci√≥n mejorada de APIs de noticias
        const NEWS_SOURCES = [
            {
                name: 'NewsAPI',
                baseUrl: 'https://newsapi.org/v2/top-headlines',
                apiKey: 'a004ca8cb8a14598a41d63adf36ffcbf'
            },
            {
                name: 'RSS Proxy',
                baseUrl: 'https://api.rss2json.com/v1/api.json',
                rssFeeds: [
                    'https://feeds.bbci.co.uk/news/world/rss.xml',
                    'https://feeds.reuters.com/reuters/topNews',
                    'https://rss.cnn.com/rss/edition.rss'
                ]
            }
        ];

        // Cache de noticias
        let noticiasCache = JSON.parse(localStorage.getItem('urbana_noticias_cache') || '[]');
        let ultimaActualizacion = localStorage.getItem('urbana_ultima_actualizacion') || '0';
        
        // Actualizar fecha y hora
        function actualizarFechaHora() {
            const ahora = new Date();
            const opciones = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            };
            
            document.getElementById('currentDate').textContent = 
                ahora.toLocaleDateString('es-ES', opciones);
            document.getElementById('currentTime').textContent = 
                ahora.toLocaleTimeString('es-ES');
        }

        async function cargarNoticias() {
            const loadingElement = document.getElementById('loadingNews');
            const errorElement = document.getElementById('errorNews');
            const containerElement = document.getElementById('newsContainer');
            const apiStatusElement = document.getElementById('apiStatus');
            
            loadingElement.style.display = 'block';
            errorElement.style.display = 'none';
            apiStatusElement.style.display = 'none';
            containerElement.innerHTML = '';

            // Verificar si tenemos cache reciente (menos de 30 minutos)
            const ahora = Date.now();
            const tiempoCache = 30 * 60 * 1000; // 30 minutos
            
            if (noticiasCache.length > 0 && (ahora - parseInt(ultimaActualizacion)) < tiempoCache) {
                loadingElement.style.display = 'none';
                mostrarNoticias(noticiasCache, 'cache');
                return;
            }

            try {
                let todasNoticias = [];
                let fuenteExitosa = null;

                // Intentar con NewsAPI primero
                try {
                    console.log('üîÑ Intentando cargar desde NewsAPI...');
                    const noticiasNewsAPI = await cargarDesdeNewsAPI();
                    if (noticiasNewsAPI.length > 0) {
                        todasNoticias = noticiasNewsAPI;
                        fuenteExitosa = 'NewsAPI';
                        apiStatusElement.innerHTML = '‚úÖ Conectado a NewsAPI';
                        apiStatusElement.className = 'api-status api-working';
                        apiStatusElement.style.display = 'block';
                    }
                } catch (error) {
                    console.log('‚ùå NewsAPI fall√≥:', error.message);
                }

                // Si NewsAPI falla, intentar con RSS
                if (todasNoticias.length === 0) {
                    try {
                        console.log('üîÑ Intentando cargar desde RSS...');
                        const noticiasRSS = await cargarDesdeRSS();
                        if (noticiasRSS.length > 0) {
                            todasNoticias = noticiasRSS;
                            fuenteExitosa = 'RSS Feeds';
                            apiStatusElement.innerHTML = '‚ö†Ô∏è Usando fuentes RSS alternativas';
                            apiStatusElement.className = 'api-status api-fallback';
                            apiStatusElement.style.display = 'block';
                        }
                    } catch (error) {
                        console.log('‚ùå RSS tambi√©n fall√≥:', error.message);
                    }
                }

                loadingElement.style.display = 'none';

                if (todasNoticias.length > 0) {
                    // Guardar en cache
                    noticiasCache = todasNoticias;
                    ultimaActualizacion = ahora.toString();
                    localStorage.setItem('urbana_noticias_cache', JSON.stringify(noticiasCache));
                    localStorage.setItem('urbana_ultima_actualizacion', ultimaActualizacion);
                    
                    mostrarNoticias(todasNoticias, fuenteExitosa);
                } else {
                    // Mostrar noticias de respaldo
                    errorElement.style.display = 'block';
                    setTimeout(() => {
                        mostrarNoticiasRespaldo();
                        apiStatusElement.innerHTML = 'üîÑ Usando noticias locales - Intente actualizar m√°s tarde';
                        apiStatusElement.className = 'api-status api-fallback';
                        apiStatusElement.style.display = 'block';
                    }, 2000);
                }

            } catch (error) {
                console.error('Error general cargando noticias:', error);
                loadingElement.style.display = 'none';
                errorElement.style.display = 'block';
                setTimeout(mostrarNoticiasRespaldo, 3000);
            }
        }

        async function cargarDesdeNewsAPI() {
            const sources = [
                { country: 'us', category: 'general', limit: 5 },
                { country: 'us', category: 'health', limit: 3 },
                { country: 'us', category: 'technology', limit: 2 }
            ];

            let allNews = [];

            for (const source of sources) {
                const url = `${NEWS_SOURCES[0].baseUrl}?country=${source.country}&category=${source.category}&pageSize=${source.limit}&apiKey=${NEWS_SOURCES[0].apiKey}`;
                
                const response = await fetch(url, {
                    method: 'GET',
                    headers: {
                        'Accept': 'application/json'
                    }
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const data = await response.json();
                
                if (data.status === 'ok' && data.articles) {
                    allNews = [...allNews, ...data.articles];
                }
            }

            return allNews.filter(article => article.title && article.description);
        }

        async function cargarDesdeRSS() {
            const rssFeeds = NEWS_SOURCES[1].rssFeeds;
            let allNews = [];

            for (const feedUrl of rssFeeds) {
                try {
                    const proxyUrl = `${NEWS_SOURCES[1].baseUrl}?rss_url=${encodeURIComponent(feedUrl)}&api_key=your_api_key&count=5`;
                    
                    const response = await fetch(proxyUrl);
                    if (response.ok) {
                        const data = await response.json();
                        if (data.status === 'ok' && data.items) {
                            const convertedNews = data.items.map(item => ({
                                title: item.title,
                                description: item.description || item.content,
                                url: item.link,
                                publishedAt: item.pubDate,
                                source: { name: data.feed.title || 'RSS Feed' },
                                urlToImage: item.thumbnail
                            }));
                            allNews = [...allNews, ...convertedNews];
                        }
                    }
                } catch (error) {
                    console.log(`Error con RSS feed ${feedUrl}:`, error);
                }
            }

            return allNews;
        }

        function mostrarNoticias(noticias, fuente) {
            const containerElement = document.getElementById('newsContainer');
            
            const filteredNews = noticias
                .filter(article => article.title && article.description)
                .slice(0, 12);

            let newsHTML = '';
            
            filteredNews.forEach((article, index) => {
                const publishedDate = new Date(article.publishedAt);
                const timeAgo = getTimeAgo(publishedDate);
                const category = getCategoryEmoji(article);
                const isUrgent = index < 2;

                newsHTML += `
                    <div class="news-item ${isUrgent ? 'urgent-news' : ''}">
                        <div class="news-date">${isUrgent ? 'üî¥ URGENTE' : 'üìÖ'} ${timeAgo}</div>
                        <div class="news-title">${category} ${article.title}</div>
                        <div class="news-content">${article.description}</div>
                        <div class="news-source">üì∞ ${article.source.name}</div>
                        <div class="news-actions">
                            <button class="btn-share-whatsapp" onclick="compartirNoticiaIndividual('${encodeURIComponent(article.title)}', '${encodeURIComponent(article.url || '#')}', '${encodeURIComponent(article.description)}')">
                                üì± Compartir
                            </button>
                            <button class="btn-read-more" onclick="abrirNoticia('${encodeURIComponent(article.url || '#')}', '${encodeURIComponent(article.title)}')">
                                üëÅÔ∏è Leer m√°s
                            </button>
                        </div>
                    </div>
                `;
            });

            containerElement.innerHTML = newsHTML;
            
            if (fuente && fuente !== 'cache') {
                console.log(`‚úÖ Noticias cargadas desde: ${fuente}`);
            }
        }

        function getTimeAgo(date) {
            const now = new Date();
            const diffInHours = Math.floor((now - date) / (1000 * 60 * 60));
            
            if (diffInHours < 1) return 'Hace menos de 1 hora';
            if (diffInHours < 24) return `Hace ${diffInHours} horas`;
            
            const diffInDays = Math.floor(diffInHours / 24);
            if (diffInDays === 1) return 'Hace 1 d√≠a';
            if (diffInDays < 7) return `Hace ${diffInDays} d√≠as`;
            
            return date.toLocaleDateString('es-ES');
        }

        function getCategoryEmoji(article) {
            const title = article.title.toLowerCase();
            const description = (article.description || '').toLowerCase();
            const content = title + ' ' + description;

            if (content.includes('health') || content.includes('medical') || content.includes('doctor')) {
                return 'üè•';
            }
            if (content.includes('technology') || content.includes('tech') || content.includes('ai') || content.includes('digital')) {
                return 'üíª';
            }
            if (content.includes('sport') || content.includes('game') || content.includes('football') || content.includes('soccer')) {
                return '‚öΩ';
            }
            if (content.includes('politics') || content.includes('election') || content.includes('government')) {
                return 'üèõÔ∏è';
            }
            if (content.includes('business') || content.includes('economy') || content.includes('finance')) {
                return 'üíº';
            }
            if (content.includes('entertainment') || content.includes('celebrity') || content.includes('music') || content.includes('movie')) {
                return 'üé¨';
            }
            return 'üì∞';
        }

        function mostrarNoticiasRespaldo() {
            const noticiasRespaldo = [
                {
                    title: "Avances en Tecnolog√≠a de Lentes Inteligentes para 2025",
                    description: "Las nuevas lentes con tecnolog√≠a de realidad aumentada prometen revolucionar la forma en que interactuamos con el mundo digital, ofreciendo funciones como traducci√≥n en tiempo real y navegaci√≥n visual.",
                    source: { name: "Tech Vision Today" },
                    publishedAt: new Date().toISOString()
                },
                {
                    title: "Estudio Revela Aumento del 40% en Problemas de Vista por Pantallas",
                    description: "Los oftalm√≥logos reportan un incremento significativo en fatiga visual y sequedad ocular debido al uso excesivo de dispositivos digitales durante el trabajo remoto.",
                    source: { name: "Health & Vision News" },
                    publishedAt: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString()
                },
                {
                    title: "Nuevas Tendencias en Monturas Sostenibles Dominan el Mercado",
                    description: "Los dise√±os eco-friendly y las monturas fabricadas con materiales reciclados est√°n ganando popularidad entre consumidores conscientes del medio ambiente.",
                    source: { name: "Fashion Optics Weekly" },
                    publishedAt: new Date(Date.now() - 4 * 60 * 60 * 1000).toISOString()
                },
                {
                    title: "Importancia de Ex√°menes Oculares Regulares Despu√©s de los 40",
                    description: "Los especialistas recomiendan revisiones anuales para detectar tempranamente condiciones como glaucoma, cataratas y degeneraci√≥n macular relacionada con la edad.",
                    source: { name: "Vision Health Today" },
                    publishedAt: new Date(Date.now() - 6 * 60 * 60 * 1000).toISOString()
                },
                {
                    title: "Innovaciones en Lentes de Contacto con Sensores de Salud",
                    description: "Nuevos lentes de contacto inteligentes pueden monitorear la presi√≥n intraocular y niveles de glucosa, revolucionando el cuidado preventivo de la salud.",
                    source: { name: "MedTech Innovation" },
                    publishedAt: new Date(Date.now() - 8 * 60 * 60 * 1000).toISOString()
                }
            ];

            const containerElement = document.getElementById('newsContainer');
            let newsHTML = '';
            
            noticiasRespaldo.forEach((article, index) => {
                const timeAgo = getTimeAgo(new Date(article.publishedAt));
                const category = getCategoryEmoji(article);
                const isUrgent = index < 1;

                newsHTML += `
                    <div class="news-item ${isUrgent ? 'urgent-news' : ''}">
                        <div class="news-date">${isUrgent ? 'üî¥ DESTACADO' : 'üìÖ'} ${timeAgo}</div>
                        <div class="news-title">${category} ${article.title}</div>
                        <div class="news-content">${article.description}</div>
                        <div class="news-source">üì∞ ${article.source.name}</div>
                        <div class="news-actions">
                            <button class="btn-share-whatsapp" onclick="compartirNoticiaIndividual('${encodeURIComponent(article.title)}', '#', '${encodeURIComponent(article.description)}')">
                                üì± Compartir
                            </button>
                            <button class="btn-read-more" onclick="alert('üì∞ Esta noticia est√° disponible solo como resumen.')">
                                üëÅÔ∏è Resumen
                            </button>
                        </div>
                    </div>
                `;

            containerElement.innerHTML = newsHTML;
            document.getElementById('errorNews').style.display = 'none';
        }

        function compartirNoticiaIndividual(titulo, url, descripcion) {
            const decodedTitle = decodeURIComponent(titulo);
            const decodedUrl = decodeURIComponent(url);
            const decodedDesc = decodeURIComponent(descripcion);
            
            const mensaje = `üì∞ *NOTICIA DESTACADA - URBANA VISION*\n\n` +
                          `üìã *${decodedTitle}*\n\n` +
                          `üìÑ ${decodedDesc}\n\n` +
                          `${decodedUrl !== '#' ? `üîó Leer completa: ${decodedUrl}\n\n` : ''}` +
                          `üì± URBANA VISION\n` +
                          `‚òéÔ∏è 809-713-5307\n` +
                          `üåê urbanavision.com\n\n` +
                          `‚ú® Mantente informado con nuestro InfoFlash`;
            
            const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(mensaje)}`;
            window.open(whatsappUrl, '_blank');
        }

        function abrirNoticia(url, titulo) {
            const decodedUrl = decodeURIComponent(url);
            const decodedTitle = decodeURIComponent(titulo);
            
            if (decodedUrl === '#' || !decodedUrl) {
                alert(`üì∞ ${decodedTitle}\n\nEsta noticia est√° disponible solo como resumen.`);
                return;
            }
            
            if (confirm(`¬øDesea abrir la noticia: "${decodedTitle}"?`)) {
                window.open(decodedUrl, '_blank');
            }
        }

        function consultarPromocion() {
            const mensaje = `üéÅ *CONSULTA PROMOCI√ìN ESPECIAL*\n\n` +
                          `¬°Hola! Vi en InfoFlash la promoci√≥n del mes y me interesa:\n\n` +
                          `‚ú® 30% de descuento en monturas seleccionadas\n` +
                          `üëÅÔ∏è Examen visual GRATIS\n\n` +
                          `¬øPodr√≠an darme m√°s detalles sobre:\n` +
                          `‚Ä¢ ¬øQu√© monturas est√°n incluidas?\n` +
                          `‚Ä¢ ¬øC√≥mo puedo agendar el examen?\n` +
                          `‚Ä¢ ¬øCu√°ndo vence la promoci√≥n?\n\n` +
                          `üì± URBANA VISION\n` +
                          `‚òéÔ∏è 809-713-5307\n` +
                          `üåê urbanavision.com`;
            
            const url = `https://wa.me/18097135307?text=${encodeURIComponent(mensaje)}`;
            window.open(url, '_blank');
        }

        function compartirNoticias() {
            const mensaje = `üì∞ *INFOFLASH - URBANA VISION*\n\n` +
                          `¬°Mantente informado con noticias mundiales en tiempo real!\n\n` +
                          `üåç Noticias internacionales actualizadas\n` +
                          `üéÅ Promoci√≥n especial del mes: 30% descuento + examen gratis\n` +
                          `üí° Consejos de salud visual diarios\n\n` +
                          `üì± Lee m√°s noticias en nuestro InfoFlash\n` +
                          `‚òéÔ∏è 809-713-5307\n` +
                          `üåê urbanavision.com\n\n` +
                          `‚ú® Cuidamos tu salud visual`;
            
            const url = `https://wa.me/?text=${encodeURIComponent(mensaje)}`;
            window.open(url, '_blank');
        }

        function suscribirseNoticias() {
            const mensaje = `üîî *SUSCRIPCI√ìN A INFOFLASH*\n\n` +
                          `¬°Hola! Me interesa recibir el InfoFlash con noticias en tiempo real.\n\n` +
                          `Por favor, suscr√≠banme para recibir:\n` +
                          `üì∞ Noticias mundiales actualizadas\n` +
                          `üéÅ Promociones especiales\n` +
                          `üí° Consejos de cuidado ocular\n` +
                          `üìÖ Recordatorios de ex√°menes\n\n` +
                          `üì± URBANA VISION\n` +
                          `‚òéÔ∏è 809-713-5307\n` +
                          `üåê urbanavision.com`;
            
            const url = `https://wa.me/18097135307?text=${encodeURIComponent(mensaje)}`;
            window.open(url, '_blank');
        }

        function agendarCita() {
            const mensaje = `üìÖ *SOLICITUD DE CITA*\n\n` +
                          `¬°Hola! He le√≠do las noticias en InfoFlash sobre la importancia de los ex√°menes anuales.\n\n` +
                          `Me gustar√≠a agendar una cita para:\n` +
                          `üëÅÔ∏è Examen visual completo\n` +
                          `üîç Revisi√≥n de salud ocular\n` +
                          `üí¨ Consulta sobre opciones de correcci√≥n\n\n` +
                          `¬øQu√© disponibilidad tienen esta semana?\n\n` +
                          `üì± URBANA VISION\n` +
                          `‚òéÔ∏è 809-713-5307\n` +
                          `üåê urbanavision.com`;
            
            const url = `https://wa.me/18097135307?text=${encodeURIComponent(mensaje)}`;
            window.open(url, '_blank');
        }

        // Inicializar
        document.addEventListener('DOMContentLoaded', function() {
            actualizarFechaHora();
            setInterval(actualizarFechaHora, 60000); // Actualizar cada minuto
            
            // Forzar carga inicial de noticias
            setTimeout(cargarNoticias, 1000);
            // Actualizar noticias cada 5 minutos
            setInterval(cargarNoticias, 300000);
        });

        console.log('‚úÖ InfoFlash URBANA VISION con sistema robusto de noticias cargado correctamente');
    </script>
</body>
</html>